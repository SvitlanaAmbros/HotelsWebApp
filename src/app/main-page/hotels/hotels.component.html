<div class="hotels-wrap">
  <div class="container">
    <div class="hotels">
      <!-- start search block -->
      <div class="hotels__search">
        <h2>Input search parametres</h2>
        <form ngNativeValidate>
          <div class="hotels__search-row">
            <div>
              <label for="country" class="hotels__description">Country</label>
              <input type="text" id="country" required>
            </div>
            <div>
              <label for="city" class="hotels__description">City</label>
              <input type="text" id="city" required>
            </div>
            <div>
              <label for="date" class="hotels__description">Date</label>
              <input type="date" id="date"
                name="date" 
                [(ngModel)]="startDate"
                min="{{currentDate| date:'yyyy-MM-dd'}}"  required>
            </div>
            <div>
              <label for="days" class="hotels__description">Days</label>
              <input type="number" class="days" min="1" required>
            </div> 
            <div>
              <input class="hotels__search-btn" type="submit" value="Search">
            </div>
          </div>
        </form>
      </div>
      <!-- EOF search block -->
      <!-- start hotels cards -->
      <div class="hotels__list" *ngIf="!!hotelsBaseInfo">
        <div class="hotels__element-pages">
          <p>Elements per page</p>
          <select [(ngModel)]="countHotelPerPage" (ngModelChange)="returnToFirstPage()">
            <option *ngFor="let option of maxQuantityHotels; let ind = index" 
              [ngValue]="ind + 1">{{ ind + 1 }}</option>
          </select>
        </div>
        <hotel-card 
        *ngFor="let hotel of getHotels" 
          [hotel]="hotel"
          (showHotelDetail)="showHotelDetail($event)"></hotel-card>
      </div>
      <!-- EOF hotels cards -->
      <!-- start pagination -->
      <div class="hotels__pagination" 
        *ngIf="!!hotelsBaseInfo && countHotelPerPage != hotelsBaseInfo.hotels.length">
          <div *ngFor="let page of pages; let ind = index">
            <input type="radio"
              class="hotels__number-btn"
              id="pages-radio_{{ind}}"
              [value]="ind"
              [(ngModel)]="currentPage"
              hidden
            >
            <label for="pages-radio_{{ind}}"
              (click)="updateHotels(ind)"
              [ngClass]="(ind == 0 
                || ind == pages.length - 1 
                || ind == currentPage
                || ind == currentPage - 1
                || ind == currentPage + 1
                ) ? 'display' : 'hide'"
                >{{ind + 1}}</label>
            <div [ngClass]="((ind == 1 || ind == pages.length - 2) 
              && currentPage - 1 != ind && currentPage + 1 !=ind 
              && currentPage != ind)? 'display': 'hide'">...</div>
          </div>  
      </div>
      <!-- EOF pagination -->
    </div>
  </div>
</div>

<!-- popup -->
<form-popup
  *ngIf="hotelPopup.isOpened"
  [header]="currentHotelInfo.title + ' ' + currentHotelInfo.stars"
  [buttonCancel]="'Cancel'"
  [buttonAction]="'Order'"
  (onClose)="closeHotelPopup()">

  <div class="content">
    <div class="popup-info">
      <!-- short info row -->
      <div class="short-info">
        <img [src]="'../../../assets/img/' + currentHotelInfo.mainImg + '.jpg'" 
          class="short-info__image"
          alt="hotel image">
        <div class="short-info__right">
          <div class="short-info__main">
            <p class="short-info__price">Total price: 
              {{ currentHotelInfo.price.basePrice * currentHotelInfo.days }} $
              for {{ currentHotelInfo.days }} days
            </p>
          </div>
         
          <!-- rate -->
          <div class="row">
            <p class="subtitle">Start data:  <span>23.03.2019</span></p>
          </div>

          <!-- room types  -->
          <div class="row">
            <p class="subtitle">Room type</p>
            <div class="short-info__items">
              <div class="short-info__item" *ngFor="let room of currentHotelInfo.rooms; let ind = index">
                <input type="radio" name="room" 
                id="room_{{ind}}" 
                class="short-info__radio" 
                [disabled]="room.availableRooms == 0"
                hidden>
                <label for="room_{{ind}}" 
                  [ngClass]="room.availableRooms == 0? 'disabled' : ''">{{room.type}}</label>
                <div *ngIf="room.availableRooms == 0" class="disabled-message">No available places in such type</div>
              </div>
            </div>
          </div>
          <!-- EOF rooms -->
          <!-- dish type -->
          <div>
            <p class="subtitle">Dish type</p>
            <div class="short-info__items">
              <div class="short-info__item" *ngFor="let type of currentHotelInfo.nutritionTypes; let ind = index">
                <input type="radio" name="dish" id="dish_{{ind}}" class="short-info__radio" hidden>
                <label for="dish_{{ind}}">{{type}}</label>
              </div>
            </div>
          </div>
          <!-- EOF dish type -->
        </div>
      </div>
      <!-- EOF short info row -->

      <!-- additional info -->
      <div class="photos">
        <p class="subtitle center">Photos</p>
        <div class="images-row">
          <img *ngFor="let image of currentHotelInfo.images"
          [src]="'../../../assets/img/' + image + '.jpg'"
          class="photos__image"
          alt="rooms">
        </div>
      </div>

      <div class="add-info">
        <p class="subtitle center">More info about hotel</p>
        <p class="subtitle">Hotel rate:  <span>{{ currentHotelInfo.rate }}</span></p>
        <p class="subtitle">Official site:  
          <span><a [href]="currentHotelInfo.site" target="_blank">{{ currentHotelInfo.site }}</a>
          </span>
        </p>
        <p class="subtitle">Hotel rate:  <span>{{ currentHotelInfo.description }}</span></p>
      </div>


      <!-- EOF additional info -->

      <div class="popup-info__map-wrap">
        <div class="popup-info__map">
          <google-map
            [lng]="currentHotelInfo.coordLng"
            [lat]="currentHotelInfo.coordLat"
            [title]="currentHotelInfo.title">
          </google-map>
        </div>
      </div>
    </div>
  </div>
</form-popup>
<!-- EOF popup -->